# 数据驱动的开发（data-driven programming）
现在的 web 开发框架，比如 React、Vue 都非常适合这种开发模式  
你**最最主要、重要、困难**的工作，就是**把数据（state）管好**，然后 React 或 Vue 会**把数据展示到页面上**  
在这种开发模式下，如果你的 state 之外的代码，看起来比较繁琐，那么就几乎可以肯定：你的数据没管好  

比如，我们需要把某个值，展示在网页上时：
``` js
function Hello({ name }) {
  return <div>hello, {name}</div>
}
```
这种写法（Vue 也类似），天然就是“数据驱动”  
原始的写法（直接操作 dom）是，```getElementById('xxx').innerHTML = name```  
还有，你的 html 里要写 div，还要给这个 div 设置一个 id，这个 id 千万不能和其他 div 重复  

每当我们要更新这个值时，就要执行 ```getElementById('xxx').innerHTML = name```   
而在 React 或 Vue 中，你只需要改变 name 这个变量的值就行了  

重点就在于，React 和 Vue 中，程序员的注意力，只放在数据（state）上就行了：  
数据更新后，其他的事交给 React 或 Vue 去做  

或者当你想删除某个元素时  
React:
``` js
function Hello({ show, name }) {
  if(show)
    return <div>hello, {name}</div>
  else
    return null
}
```

Vue:
``` js
<div v-if="show">hello, {{name}}</div>
```

关于“什么是编程”，最广泛的解释是：“编程”就是“给电脑下命令”  
当你要删除元素时，你可能就要写 ```el.removeChild('xxx')```  
这种解释，一般称为“命令式编程”  

而“数据驱动的开发”，是一种“声明式编程”  
这种开发模式中，你不需要下命令（或者不直接下命令）  
有一个贴心的仆人在你旁边：  
你举个手，他就知道你肩膀酸，就会跑过来给你捏一捏肩膀  
你张张嘴，他就知道你是饿了，他帮你做饭，端上桌，甚至喂到你嘴里  
你一皱眉，他就知道你有点闷，他给你来一段单口相声...

React 和 Vue 就是这样一个仆人  
你跟仆人说好，张嘴代表饿了  
你不需要告诉他怎么解决这个问题，让他自己寻思去  
不管是仆人亲自下厨，还是帮你点外卖  
总之就是，你**不用亲自去解决问题**  

在“删除元素”那个案例中，你实际上是告诉了 React 或 Vue：  
当那个变量 ```show``` 是 ```true``` 时，就把元素添加上去  
是 ```false``` 时，就删掉  
怎么删、什么时候删，不用你去管  

我们知道 dom 操作是很费时的  
原因是，dom 操作就像去超市买东西  
当你想吃薯片时，为了一袋薯片而跑一趟超市，当然是费时  

但如果你要吃薯片，然后想到待会做饭要买菜，家里卫生纸也不多了  
这样你开一个购物清单，去一趟超市，就显得不那么费时了  

所以当你的变量 ```show``` 的值变化时  
React 和 Vue 不会立刻删除、添加这个元素  
它会等一会，如果你还有其他要变更的元素，它会攒在一起执行  
而这个优化，你是感知不到的，你也不需要去关注  

考虑一下 ```<div v-if="show">hello, {{name}}</div>``` 这行 Vue 代码，用原始的 dom 写法，要写多少

## 提示
##### 初始化 state
一般情况下，state 要有专门的**初始化函数**  
应保证初始化之后是可用的、不需进一步加工，如果某一小步出现异常但有补救措施，应在这里执行  
或者发现 state 不可用，也应返回不需进一步处理的异常情况  

##### state 之间的依赖
如果 state 之间有依赖关系  
比如 A state 要等 B state 初始化完成才能初始化  
或者 A state 出现异常后，需要 B state 的结果来补救  

此时应把这些有依赖关系的 state 的**初始化函数**合并在一起
